---
output: github_document
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
library(tidyverse)

Sys.setenv("D2SB_SP_PATH" = "~/Library/CloudStorage/OneDrive-SharedLibraries-UniversityofIowa/Data2Science BRIDGE - Documents")

```

# D2SBtools

<!-- badges: start -->
<!-- badges: end -->

The goal of D2SBtools is to provide helpful internal tools for D2SB projects. 

## Installation

You can install the development version of D2SBtools like so:

```{r, eval = FALSE}
devtools::install_github("petersonR/D2SBtools")
```

Then load the library: 

```{r}
library(D2SBtools)
```


# Example

This is a basic example.

## Create new D2SB project

The following copies the [template project directory](https://github.com/petersonR/D2SBtools/tree/main/inst/templates/project/skeleton) and thereby creates a new project. 

```{r}
# write a local verson to be able to read
create_project(
  project_name = "temporary_project", 
  path = NULL, # creates in current directory
  open = FALSE, # Opens in RStudio
  
  # Set parameters in Admin/project.yml (can be done later too)
  title = "My D2SB Project",
  analyst = "Me",
  status = "active",
  pi = "My PI",
  data_path_from_sharepoint = "Projects/template_project"
)
```

```{r, include = FALSE}
fs::dir_copy("temporary_project/Admin", ".")
```


## Get all available project data

Moving into this temporary project, we can then run the following commands

```{r example}
get_project_data()
```

## Get specific project data 

```{r}
get_project_data("title")
```

## Get sharepoint path

```{r}
sp_path()

```

## List files on sharepoint

```{r}
list.files(sp_path())
```

## Read data off sharepoint

```{r}
test_data <- read_csv(sp_path("DataRaw/test_data.csv")) 
test_data
```

```{r, echo = FALSE, include = FALSE}
unlink("temporary_project", recursive = TRUE)
unlink("Admin", recursive = TRUE)
```


## Create new report

A D2SB template report is available via this package. A new report based on this template can be created via: 

```{r, eval = FALSE}
create_report(path = "Reports/new.qmd")
```

